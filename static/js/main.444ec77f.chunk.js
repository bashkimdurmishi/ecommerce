(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{33:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),s=a(26),n=a.n(s),i=a(3),l=(a(33),a(5)),o=a.n(l),d=a(2),j=a(9),u=Object(c.createContext)("Hi"),b=a(0);function m(e){var t=Object(c.useState)("test@mail.com"),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)("scott123@B"),l=Object(i.a)(n,2),m=l[0],h=l[1],O=Object(c.useContext)(u),x=Object(c.useState)({email:!1,password:!1}),p=Object(i.a)(x,2),f=p[0],g=p[1],N=Object(c.useState)({email:[],password:[]}),v=Object(i.a)(N,2),y=v[0],w=v[1],k=Object(c.useState)("Hello"),C=Object(i.a)(k,2),I=C[0],S=C[1],P=function(){var e={email:[]};r||e.email.push("Email can't be blank!");r&&(/(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)/.test(r)||e.email.push("Proper email is expected")),e.password=[],m||e.password.push("Password can't be blank!");m&&(/(^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$)/.test(m)||e.password.push("Password must contain a minimum 8 characters, at least one uppercase letter, one lowercase letter, one number and one special character")),w(e)};Object(c.useEffect)(P,[r,m]);var U=function(){var t=Object(j.a)(o.a.mark((function t(){var a,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=f,Object.keys(f).forEach((function(e){a[e]=!0})),g(a),P(),!B){t.next=16;break}return t.next=7,fetch("https://api.npoint.io/2210873b5c32eb592634/users?email=".concat(r,"&password=").concat(m),{method:"GET"});case 7:if(!(c=t.sent).ok){t.next=15;break}return t.next=11,c.json();case 11:(s=t.sent).length>0?(O.setUser(Object(d.a)(Object(d.a)({},O.user),{},{isLoggedIn:!0,currentUserName:s[0].fullName,currentUserId:s[0].id,currentUserRole:s[0].role})),"user"===s[0].role?e.history.replace("/dashboard"):e.history.replace("/products")):S(Object(b.jsx)("span",{className:"text-danger",children:"User not found! Please try again or register if you dont have an account."})),t.next=16;break;case 15:case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var e=!0;for(var t in y)y[t].length>0&&(e=!1);return e};return Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-lg-5 col-md-7 mx-auto",children:Object(b.jsxs)("div",{className:"card border-success shadow-lg my-2",children:[Object(b.jsx)("div",{className:"card-header border-bottom border-success",children:Object(b.jsx)("h4",{style:{fontSize:"40px"},className:"text-warning text-center",children:"Login"})}),Object(b.jsxs)("div",{className:"card-body border-bottom border-success",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"text",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},id:"email",placeholder:"Email...",onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},{email:!0})),P()}}),Object(b.jsx)("div",{className:"text-danger",children:f.email&&y.email[0]?y.email:""})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:m,onChange:function(e){return h(e.target.value)},id:"password",placeholder:"Password...",onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},{password:!0})),P()}}),Object(b.jsx)("div",{className:"text-danger",children:f.password&&y.password[0]?y.password:""})]})]}),Object(b.jsxs)("div",{className:"card-footer text-center",children:[Object(b.jsx)("div",{className:"m-1",children:I}),Object(b.jsx)("button",{className:"btn btn-warning text-light m-2",onClick:U,children:"Login"})]})]})})})}var h=a(7);function O(e){var t=Object(c.useState)({email:"",password:"",fullName:"",dateOfBirth:"",country:"",gender:""}),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)({email:[],password:[],fullName:[],dateOfBirth:[],country:[],gender:[]}),l=Object(i.a)(n,2),m=l[0],O=l[1],x=Object(c.useState)({email:!1,password:!1,fullName:!1,dateOfBirth:!1,country:!1,gender:!1}),p=Object(i.a)(x,2),f=p[0],g=p[1],N=Object(c.useState)([{id:1,countryName:"USA"},{id:2,countryName:"Japan"},{id:3,countryName:"India"},{id:4,countryName:"Albania"},{id:5,countryName:"UK"},{id:6,countryName:"France"},{id:7,countryName:"Italy"}]),v=Object(i.a)(N,1)[0],y=Object(c.useState)(""),w=Object(i.a)(y,2),k=w[0],C=w[1],I=Object(c.useContext)(u),S=function(){var e=[];e.email=[],r.email||e.email.push("Email can't be blank!");r.email&&(/(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)/.test(r.email)||e.email.push("Proper email is expected")),e.password=[],r.password||e.password.push("Password can't be blank!");r.password&&(/(^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$)/.test(r.password)||e.password.push("Password must contain a minimum 8 characters, at least one uppercase letter, one lowercase letter, one number and one special character")),e.fullName=[],r.fullName||e.fullName.push("Name can't be blank!"),e.gender=[],r.gender||e.gender.push("Gender can't be blank!"),e.country=[],r.country||e.country.push("Country can't be blank!"),e.dateOfBirth=[],r.dateOfBirth||e.dateOfBirth.push("Date of birth can't be blank!"),O(e)};Object(c.useEffect)(S,[r]);var P=function(){var t=Object(j.a)(o.a.mark((function t(){var a,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=f,Object.keys(f).forEach((function(e){a[e]=!0})),g(a),S(),!U()){t.next=17;break}return t.next=7,fetch("https://api.npoint.io/2210873b5c32eb592634/users",{method:"POST",body:JSON.stringify({email:r.email,password:r.password,fullName:r.fullName,dateOfBirth:r.dateOfBirth,gender:r.gender,country:r.country,role:"user"}),headers:{"Content-type":"application/json"}});case 7:if(!(c=t.sent).ok){t.next=15;break}return t.next=11,c.json();case 11:s=t.sent,I.setUser(Object(d.a)(Object(d.a)({},I.user),{},{isLoggedIn:!0,currentUserName:s.fullName,currentUserId:s.id,currentUserRole:s.role})),C(Object(b.jsx)("span",{className:"text-success",children:"Success"})),e.history.replace("/dashboard");case 15:t.next=18;break;case 17:C(Object(b.jsx)("span",{className:"text-danger",children:"Error"}));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=!0;for(var t in m)m[t].length>0&&(e=!1);return e};return Object(b.jsx)("div",{className:"col-lg-4 mx-auto",children:Object(b.jsxs)("div",{className:"card border-primary shadow my-2",children:[Object(b.jsx)("div",{className:"card-header border-bottom border-primary",children:Object(b.jsx)("h4",{className:"text-center text-warning my-3",style:{fontSize:"40px"},children:"Register"})}),Object(b.jsxs)("div",{className:"card-body border-bottom border-primary",children:[Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",htmlFor:"email",children:[Object(b.jsx)("div",{className:"col-lg-4 ",children:Object(b.jsx)("label",{children:"Email"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsx)("input",{type:"text",className:"form-control",name:"email",id:"email",value:r.email,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("div",{className:"text-danger",children:f.email&&m.email[0]?m.email:""})]})]}),Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",htmlFor:"password",children:[Object(b.jsx)("div",{className:"col-lg-4",children:Object(b.jsx)("label",{children:"Password"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsx)("input",{type:"password",className:"form-control",name:"password",value:r.password,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("div",{className:"text-danger",children:f.password&&m.password[0]?m.password:""})]})]}),Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",htmlFor:"fullName",children:[Object(b.jsx)("div",{className:"col-lg-4",children:Object(b.jsx)("label",{children:"Full Name"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsx)("input",{type:"text",className:"form-control",name:"fullName",id:"fullName",value:r.fullName,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("div",{className:"text-danger",children:f.fullName&&m.fullName[0]?m.fullName:""})]})]}),Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",htmlFor:"dateOfBirth",children:[Object(b.jsx)("div",{className:"col-lg-4",children:Object(b.jsx)("label",{children:"Date of birth"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsx)("input",{type:"date",className:"form-control",name:"dateOfBirth",id:"dateOfBirth",value:r.dateOfBirth,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("div",{className:"text-danger",children:f.dateOfBirth&&m.dateOfBirth[0]?m.dateOfBirth:""})]})]}),Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",children:[Object(b.jsx)("div",{className:"col-lg-4",children:Object(b.jsx)("label",{children:"Gender"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{type:"radio",name:"gender",value:"male",id:"male",className:"form-check-input",checked:"male"===r.gender,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("label",{htmlFor:"male",className:"form-check-inline",children:"Male"})]}),Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{type:"radio",name:"gender",value:"female",id:"female",className:"form-check-input",checked:"female"===r.gender,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()}}),Object(b.jsx)("label",{htmlFor:"female",className:"form-check-inline",children:"Female"})]}),Object(b.jsx)("div",{className:"text-danger",children:f.gender&&m.gender[0]?m.gender:""})]})]}),Object(b.jsxs)("div",{className:"form-group row align-items-center my-1",htmlFor:"dateOfBirth",children:[Object(b.jsx)("div",{className:"col-lg-4 ",children:Object(b.jsx)("label",{children:"Country"})}),Object(b.jsxs)("div",{className:"col-lg-8",children:[Object(b.jsxs)("select",{type:"date",className:"form-control",name:"country",id:"country",value:r.country,onChange:function(e){return s(Object(d.a)(Object(d.a)({},r),{},Object(h.a)({},e.target.name,e.target.value)))},onBlur:function(e){g(Object(d.a)(Object(d.a)({},f),{},Object(h.a)({},e.target.name,!0))),S()},children:[Object(b.jsx)("option",{value:"",children:"--Select Country--"}),v.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.countryName},e.id)}))]}),Object(b.jsx)("div",{className:"text-danger",children:f.country&&m.country[0]?m.country:""})]})]})]}),Object(b.jsxs)("div",{className:"card-footer text-center",children:[Object(b.jsx)("div",{className:"m-1",children:k}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn btn-warning text-light m-2",onClick:P,children:"Register"})})]})]})})}function x(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"No match found..."})})}function p(e){var t=e.orderId,a=e.productId,c=e.isPaymentComplete,r=e.quantity,s=e.prodName,n=e.prodPrice,i=e.rating,l=e.userId,o=e.onBuyNowClick,d=e.onDeleteClick;return console.log("Order rendered",s),Object(b.jsx)("div",{className:"card my-2 shadow",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("h6",{children:[Object(b.jsx)("i",{className:"fa fa-arrow-right"})," ",s,c?null:Object(b.jsxs)("div",{className:"float-end",children:[Object(b.jsxs)("button",{className:"btn btn-sm btn-info ms-2 text-light",onClick:function(){return o(t,l,a,r,n)},children:[Object(b.jsx)("i",{className:"fa fa-truck"})," Buy Now"]}),Object(b.jsxs)("button",{className:"btn btn-sm btn-danger ms-2 text-light",onClick:function(){return d(t)},children:[Object(b.jsx)("i",{className:"fa fa-trash-o"})," Delete"]})]})]}),Object(b.jsx)("table",{className:"table table-sm table-borderless mt-1",children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{width:"100px"},children:" Quantity:"}),Object(b.jsx)("td",{children:r})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{width:"100px"},children:" Price:"}),Object(b.jsxs)("td",{children:["$ ",n]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{style:{width:"100px"},children:" Rating:"}),Object(b.jsx)("td",{children:i})]})]})})]})})}var f=r.a.memo(p),g=function(){return fetch("https://api.npoint.io/2210873b5c32eb592634/products",{method:"GET"})},N=function(){return fetch("https://api.npoint.io/2210873b5c32eb592634/brands",{method:"GET"})},v=function(){return fetch("https://api.npoint.io/2210873b5c32eb592634/categories",{method:"GET"})},y=function(e,t){return e.find((function(e){return e.id===t}))},w=function(e,t){return e.find((function(e){return e.id===t}))},k=function(e){return e.filter((function(e){return!0===e.isPaymentComplete}))},C=function(e){return e.filter((function(e){return!1===e.isPaymentComplete}))},I=function(e,t){return e.find((function(e){return e.id===t}))},S=g,P=function(e){return fetch("https://api.npoint.io/2210873b5c32eb592634/orders?userId=".concat(e),{method:"GET"})};function U(){var e=Object(c.useContext)(u),t=Object(c.useState)([]),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)(!1),l=Object(i.a)(n,2),m=l[0],h=l[1],O=Object(c.useState)(!1),x=Object(i.a)(O,2),p=x[0],g=x[1],N=Object(c.useCallback)(Object(j.a)(o.a.mark((function t(){var a,c,r,n,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e.user.currentUserId);case 2:if(!(a=t.sent).ok){t.next=18;break}return t.next=6,a.json();case 6:return c=t.sent,t.next=9,S();case 9:if(!(r=t.sent).ok){t.next=18;break}return t.next=13,r.json();case 13:n=t.sent,c.forEach((function(e){e.product=I(n,e.productId)})),s(c),i=c.filter((function(e){return!1===e.isPaymentComplete})),e.setUser(Object(d.a)(Object(d.a)({},e.user),{},{currentUserOrders:i.length}));case 18:case"end":return t.stop()}}),t)}))),[e.user.currentUserId]);Object(c.useEffect)((function(){N()}),[e.user.currentUserId,N]);var v=Object(c.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t,a,c,r,s){var n,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to place order for this product?")){e.next=9;break}return n={id:t,productId:c,userId:a,quantity:r,isPaymentComplete:!0},e.next=4,fetch("http://localhost:5000/orders/".concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"Content-type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:l=e.sent,i.ok&&(console.log("order body",l),N(),g(!0));case 9:case"end":return e.stop()}}),e)})));return function(t,a,c,r,s){return e.apply(this,arguments)}}(),[N]),y=Object(c.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this item?")){e.next=11;break}return e.next=3,fetch("http://localhost:5000/orders/".concat(t),{method:"DELETE"});case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:c=e.sent,console.log(c),N(),h(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]);return Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12 py-3 header",children:Object(b.jsxs)("h4",{style:{color:"#a80000"},children:[Object(b.jsx)("i",{className:"fa fa-dashboard"}),"Dashboard"," ",Object(b.jsxs)("button",{className:"btn btn-sm btn-info bg-warning text-light",onClick:N,children:[Object(b.jsx)("i",{className:"fa fa-refresh"})," Refresh"]})]})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsxs)("h4",{className:"py-2 my-2 text-info  text-warning border-bottom border-info",children:[Object(b.jsx)("i",{className:"fa fa-history"})," Previous Orders"," ",Object(b.jsx)("span",{className:"badge bg-warning",children:k(r).length})]}),0===k(r).length?Object(b.jsx)("div",{className:"text-danger",children:"No Previous Orders"}):null,k(r).map((function(t){return Object(b.jsx)(f,{orderId:t.id,productId:t.productId,isPaymentComplete:t.isPaymentComplete,quantity:t.quantity,prodName:t.product.productName,prodPrice:t.product.price,rating:t.product.rating,userId:e.user.currentUserId},t.id)}))]}),Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsxs)("h4",{className:"py-2 my-2 text-primary border-bottom text-warning border-info",children:[Object(b.jsx)("i",{className:"fa fa-shopping-cart"})," Cart"," ",Object(b.jsx)("span",{className:"badge bg-danger",children:C(r).length})]}),p&&Object(b.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:["Your order has been placed.",Object(b.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:function(){return g(!1)}})]}),m&&Object(b.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:["Your order has been deleted.",Object(b.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:function(){return h(!1)}})]}),0===C(r).length?Object(b.jsx)("div",{className:"text-danger",children:"No Previous Orders"}):null,C(r).map((function(t){return Object(b.jsx)(f,{orderId:t.id,productId:t.productId,isPaymentComplete:t.isPaymentComplete,quantity:t.quantity,prodName:t.product.productName,prodPrice:t.product.price,rating:t.product.rating,userId:e.user.currentUserId,onBuyNowClick:v,onDeleteClick:y},t.id)}))]})]})})]})}var B=a(12),E=a(4);function A(){var e=Object(c.useContext)(u);return Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)(B.b,{className:"navbar-brand",to:"#",children:"eCommerce"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(b.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[e.user.isLoggedIn&&"user"===e.user.currentUserRole?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(B.b,{className:"nav-link position-relative","aria-current":"page",to:"/dashboard",activeClassName:"active",children:[Object(b.jsx)("i",{className:"fa fa-dashboard"})," Dashboard",Object(b.jsx)("span",{className:"order-number position-absolute top-10 start-100 translate-middle badge rounded-pill bg-danger ",children:e.user.currentUserOrders})]})}),Object(b.jsx)("li",{className:"nav-item ms-3",children:Object(b.jsxs)(B.b,{className:"nav-link","aria-current":"page",to:"/store",activeClassName:"active",children:[Object(b.jsx)("i",{className:"fa fa-shopping-bag"})," Store"]})})]}):e.user.isLoggedIn&&"admin"===e.user.currentUserRole?Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(B.b,{className:"nav-link","aria-current":"page",to:"/products",exact:!0,activeClassName:"active",children:[Object(b.jsx)("i",{className:"fa fa-shopping-bag"})," Products"]})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(B.b,{className:"nav-link","aria-current":"page",to:"/",exact:!0,activeClassName:"active",children:"Login"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(B.b,{className:"nav-link","aria-current":"page",to:"/register",activeClassName:"active",children:"Register"})})]}),Object(b.jsx)("div",{style:{position:"absolute",right:70},children:Object(b.jsx)("ul",{className:"navbar-nav",children:e.user.isLoggedIn?Object(b.jsxs)("li",{className:"nav-item dropdown",children:[Object(b.jsx)("a",{className:"nav-link dropdown-toggle",href:"/#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(b.jsx)("i",{className:"fa fa-user-circle",children:e.user.currentUserName})}),Object(b.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(b.jsx)("li",{children:Object(b.jsx)("a",{className:"dropdown-item",href:"/#",onClick:function(t){t.preventDefault(),e.setUser({isLoggedIn:!1,currentUserName:null,currentUserId:null,currentUserOrders:0,currentUserRole:null}),window.location.hash="/"},children:"Logout"})})})]}):null})})]})})]})})}var F=a(14),T=function(e){var t=e.product,a=e.onAddItemToCartClick;return Object(b.jsx)("div",{className:"col-lg-6",children:Object(b.jsx)("div",{className:"card m-1",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("img",{className:"col-lg-12 my-auto",style:{height:"300px",width:"auto",margin:"auto"},src:t.img,alt:"none"}),Object(b.jsxs)("div",{className:"col-lg-9 info",children:[Object(b.jsxs)("h5",{children:[Object(b.jsx)("i",{className:"fa fa-arrow-right"})," ",t.productName]}),Object(b.jsxs)("div",{children:["$",t.price.toFixed(2)]}),Object(b.jsxs)("div",{className:"mt-2",children:["#",t.brand.brandName," #",t.category.categoryName]}),Object(b.jsxs)("div",{children:[Object(F.a)(Array(t.rating).keys()).map((function(e){return Object(b.jsx)("i",{className:"fa fa-star text-warning"},e)})),Object(F.a)(Array(5-t.rating).keys()).map((function(e){return Object(b.jsx)("i",{className:"fa fa-star-o text-warning"},e)}))]}),Object(b.jsx)("div",{className:"float-end",children:t.isOrdered?Object(b.jsx)("span",{className:"text-primary",children:"Added to Cart!"}):Object(b.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:function(){return a(t)},children:[Object(b.jsx)("i",{className:"fa fa-cart-plus"})," Add to Cart"]})})]})]})})})})};var R=function(){var e=Object(c.useContext)(u),t=Object(c.useState)(null),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)(null),l=Object(i.a)(n,2),d=l[0],m=l[1],h=Object(c.useState)(null),O=Object(i.a)(h,2),x=O[0],p=O[1],f=Object(c.useState)(null),g=Object(i.a)(f,2),k=g[0],C=g[1],I=Object(c.useState)(""),S=Object(i.a)(I,2),P=S[0],U=S[1],B=N,E=v,A=y,F=w;Object(c.useEffect)((function(){return Object(j.a)(o.a.mark((function e(){var t,a,c,r,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return t=e.sent,e.next=5,t.json();case 5:return(a=e.sent).forEach((function(e){e.isChecked=!0})),s(a),console.log("brands are",a),e.next=11,E();case 11:return c=e.sent,e.next=14,c.json();case 14:return(r=e.sent).forEach((function(e){e.isChecked=!0})),m(r),e.next=19,fetch("https://api.npoint.io/2210873b5c32eb592634/products?productName_like=".concat(P),{method:"GET"});case 19:if(!(n=e.sent).ok){e.next=25;break}return e.next=23,n.json();case 23:(i=e.sent)&&(i.forEach((function(e){e.brand=A(a,e.brandId),e.category=F(r,e.categoryId),e.isOrdered=!1})),p(i),C(i),console.log("products are",x));case 25:case"end":return e.stop()}}),e)})))()}),[P,B,E,A,F]);var R=function(){console.log("categories are",d,r),C(x.filter((function(e){return d.filter((function(t){return t.id===e.categoryId&&t.isChecked})).length>0})).filter((function(e){return r.filter((function(t){return t.id===e.brandId&&t.isChecked})).length>0})))},z=function(t){Object(j.a)(o.a.mark((function a(){var c,r,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={userId:e.user.currentUserId,productId:t.id,quantity:1,isPaymentComplete:!1},a.next=3,fetch("http://localhost:5000/orders",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 3:if(!(r=a.sent).ok){a.next=10;break}return a.next=7,r.json();case 7:a.sent,s=x.map((function(e){return e.id===t.id&&(e.isOrdered=!0),e})),p(s);case 10:case"end":return a.stop()}}),a)})))()};return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"row py-3 header",children:[Object(b.jsx)("div",{className:"col-lg-3",children:Object(b.jsxs)("h4",{children:[Object(b.jsx)("i",{className:"fa fa-shopping-bag"})," Store",Object(b.jsxs)("span",{className:"badge bg-warning ms-3",children:[k&&k.length," Results"]})]})}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsx)("input",{type:"text",value:P,placeholder:"Search...",className:"form-control",autoFocus:"autofocus",onChange:function(e){U(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-lg-3 py-2",children:[Object(b.jsxs)("div",{className:"my-2",children:[Object(b.jsx)("h5",{children:"Brands"}),Object(b.jsx)("ul",{className:"list-group list-group-flush",children:r&&r.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{type:"checkbox",className:"form-check-input",value:"true",checked:e.isChecked,onChange:function(){!function(e){var t=r.map((function(t){return t.id===e&&(t.isChecked=!t.isChecked),t}));s(t),R()}(e.id)},id:"brand".concat(e.id)}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"brand".concat(e.id),children:e.brandName})]})},e.id)},e.id)}))})]}),Object(b.jsxs)("div",{className:"my-2",children:[Object(b.jsx)("h5",{children:"Categories"}),Object(b.jsx)("ul",{className:"list-group list-group-flush",children:d&&d.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{type:"checkbox",className:"form-check-input",value:"true",checked:e.isChecked,onChange:function(){!function(e){var t=d.map((function(t){return t.id===e&&(t.isChecked=!t.isChecked),t}));m(t),R()}(e.id)},id:"brand".concat(e.id)}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"brand".concat(e.id),children:e.categoryName})]})},e.id)},e.id)}))})]})]}),Object(b.jsx)("div",{className:"col-lg-9 py-2",children:Object(b.jsx)("div",{className:"row",children:k&&k.map((function(e){return Object(b.jsx)(T,{product:e,onAddItemToCartClick:z},e.id)}))})})]})]})},z=function(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],n=Object(c.useState)(null),l=Object(i.a)(n,2),d=(l[0],l[1]),u=Object(c.useState)(null),m=Object(i.a)(u,2),h=(m[0],m[1]),O=Object(c.useState)([]),x=Object(i.a)(O,2),p=x[0],f=x[1],g=Object(c.useState)([]),k=Object(i.a)(g,2),C=k[0],I=k[1],S=y,P=w,U=N,B=v;return Object(c.useEffect)((function(){return Object(j.a)(o.a.mark((function e(){var t,a,c,s,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:return t=e.sent,e.next=5,t.json();case 5:return(a=e.sent).forEach((function(e){e.isChecked=!0})),d(a),console.log("brands are",a),e.next=11,B();case 11:return c=e.sent,e.next=14,c.json();case 14:return(s=e.sent).forEach((function(e){e.isChecked=!0})),h(s),e.next=19,fetch("https://api.npoint.io/2210873b5c32eb592634/products?productName_like=".concat(r),{method:"GET"});case 19:if(!(n=e.sent).ok){e.next=25;break}return e.next=23,n.json();case 23:(i=e.sent)&&(i.forEach((function(e){e.brand=S(a,e.brandId),e.category=P(s,e.categoryId),e.isOrdered=!1})),f(i),I(i),console.log("products are",p));case 25:case"end":return e.stop()}}),e)})))()}),[r]),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("div",{className:"row p-3 header bg-light",children:[Object(b.jsx)("div",{className:"col-lg-3",children:Object(b.jsxs)("h4",{children:[Object(b.jsx)("i",{className:"fa fa-suitcase"}),"\xa0 Products\xa0",Object(b.jsx)("span",{className:"badge bg-secondary",children:p.length})]})}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsx)("input",{type:"text",value:r,placeholder:"Search...",autoFocus:"autofocus",className:"form-control",onChange:function(e){return s(e.target.value)}})})]})}),Object(b.jsx)("div",{className:"col-lg-10 mx-auto mb-2",children:Object(b.jsx)("div",{className:"card my-2 shadow",children:Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#"}),Object(b.jsx)("th",{children:"Product Name"}),Object(b.jsx)("th",{children:"Price"}),Object(b.jsx)("th",{children:"Brand"}),Object(b.jsx)("th",{children:"Category"}),Object(b.jsx)("th",{children:"Rating"})]})}),Object(b.jsx)("tbody",{children:C.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.productName}),Object(b.jsxs)("td",{children:["$",e.price]}),Object(b.jsx)("td",{children:e.brand.brandName}),Object(b.jsx)("td",{children:e.category.categoryName}),Object(b.jsxs)("td",{children:[Object(F.a)(Array(e.rating).keys()).map((function(e){return Object(b.jsx)("i",{className:"fa fa-star text-warning"},e)})),Object(F.a)(Array(5-e.rating).keys()).map((function(e){return Object(b.jsx)("i",{className:"fa fa-star-o text-warning"},e)}))]})]},e.id)}))})]})})})]})};var D=function(){var e=Object(c.useState)({isLoggedIn:!1,currentUserId:null,currentUserName:null,currentUserOrders:0,currentUserRole:null}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(b.jsx)(u.Provider,{value:{user:a,setUser:r},children:Object(b.jsxs)(B.a,{children:[Object(b.jsx)(A,{}),Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)(E.c,{children:[Object(b.jsx)(E.a,{path:"/",exact:!0,component:m}),Object(b.jsx)(E.a,{path:"/dashboard",component:U}),Object(b.jsx)(E.a,{path:"/register",component:O}),Object(b.jsx)(E.a,{path:"/store",component:R}),Object(b.jsx)(E.a,{path:"/products",component:z}),Object(b.jsx)(E.a,{path:"*",component:x})]})})]})})};a(41),a(42),a(63),a(64),a(65);n.a.render(Object(b.jsx)(D,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.444ec77f.chunk.js.map